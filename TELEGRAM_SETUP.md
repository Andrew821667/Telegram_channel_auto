# Telegram Channel API - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

## üéØ –¶–µ–ª—å
–°–±–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –ø—É–±–ª–∏—á–Ω—ã—Ö Telegram –∫–∞–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ Telegram Client API (Telethon).

---

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Telegram API credentials** (—É–∂–µ –µ—Å—Ç—å):
   - API ID: `34617695`
   - API Hash: `e95e6e190f5efcff98001a490acea1c1`

2. **–°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `.env`)

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å `.env` —Ñ–∞–π–ª

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –≤–∞—à `.env`:

```bash
# Telegram Client API (–¥–ª—è —Å–±–æ—Ä–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –∫–∞–Ω–∞–ª–æ–≤)
TELEGRAM_API_ID=34617695
TELEGRAM_API_HASH=e95e6e190f5efcff98001a490acea1c1
TELEGRAM_SESSION_NAME=telegram_bot
TELEGRAM_CHANNELS=@ai_newz,@mlnews,@legaltechnews,@rb_tech,@tass_tech,@habr
TELEGRAM_FETCH_LIMIT=50
TELEGRAM_FETCH_ENABLED=true
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install telethon==1.34.0

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker (–ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)
docker compose build --no-cache app celery_worker bot
```

### –®–∞–≥ 3: –ü–µ—Ä–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–û–î–ò–ù –†–ê–ó)

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Telethon –ø–æ–ø—Ä–æ—Å–∏—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é.

–ï—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å Bot Token, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

```python
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –û–î–ò–ù –†–ê–ó –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏
import asyncio
from telethon import TelegramClient

api_id = 34617695
api_hash = "e95e6e190f5efcff98001a490acea1c1"
bot_token = "YOUR_BOT_TOKEN"  # –í–∞—à bot token –æ—Ç @BotFather

async def main():
    client = TelegramClient('telegram_bot', api_id, api_hash)
    await client.start(bot_token=bot_token)
    print("‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ telegram_bot.session")
    await client.disconnect()

asyncio.run(main())
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞

–ï—Å–ª–∏ –Ω–µ—Ç bot token, –Ω—É–∂–µ–Ω –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:

```python
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –û–î–ò–ù –†–ê–ó
import asyncio
from telethon import TelegramClient

api_id = 34617695
api_hash = "e95e6e190f5efcff98001a490acea1c1"

async def main():
    client = TelegramClient('telegram_bot', api_id, api_hash)
    await client.start()
    # –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–æ–≥–¥–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç
    # –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ Telegram –∫–æ–≥–¥–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç
    print("‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!")
    await client.disconnect()

asyncio.run(main())
```

**–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
- –°–æ–∑–¥–∞—Å—Ç—Å—è —Ñ–∞–π–ª `telegram_bot.session`
- –≠—Ç–æ—Ç —Ñ–∞–π–ª –ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ git (–≤ .gitignore)
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–∞—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã

```bash
docker compose restart celery_worker bot
```

---

## üéØ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–∞–ª–æ–≤

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `TELEGRAM_CHANNELS` –≤ `.env`:

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–∞–Ω–∞–ª—ã:

**AI/ML –Ω–æ–≤–æ—Å—Ç–∏:**
- `@ai_newz` - AI News
- `@mlnews` - Machine Learning News
- `@deeplearning_ru` - Deep Learning Russia

**LegalTech:**
- `@legaltechnews` - LegalTech News
- `@legaltech_russia` - LegalTech Russia

**–ë–∏–∑–Ω–µ—Å + –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- `@rb_tech` - –†–ë–ö –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- `@tass_tech` - –¢–ê–°–° –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- `@vcru` - VC.ru
- `@habr` - Habr

**–§–æ—Ä–º–∞—Ç:**
```bash
TELEGRAM_CHANNELS=@channel1,@channel2,@channel3
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Å–µ –∫–∞–Ω–∞–ª—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ AI+legal keywords –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —Å–±–æ—Ä–∞ –Ω–æ–≤–æ—Å—Ç–µ–π:

–í Telegram –±–æ—Ç–µ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```
/fetch
```

–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
- –°–∫–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
- –°–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π —Å–æ–±—Ä–∞–Ω–æ
- –°–∫–æ–ª—å–∫–æ –ø—Ä–æ—à–ª–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é AI+legal
- –¢–æ–ø-3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:

```bash
docker compose logs -f celery_worker | grep telegram
```

–î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å:
```
fetching_telegram_channel channel=ai_newz
telegram_message_fetched channel=ai_newz message_id=123
telegram_channel_fetch_complete channel=ai_newz articles_accepted=5
```

---

## üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º:

**AI keywords:**
- –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, –Ω–µ–π—Ä–æ—Å–µ—Ç—å, chatgpt, gpt, llm, automation, ml, ai

**Legal/Business keywords:**
- –ø—Ä–∞–≤–æ, —Å—É–¥, —é—Ä–∏—Å—Ç, –∑–∞–∫–æ–Ω, compliance, –±–∏–∑–Ω–µ—Å, –∫–æ–º–ø–∞–Ω–∏—è, —Ä–∏—Å–∫–∏, gdpr

**–õ–æ–≥–∏–∫–∞:**
–°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –µ—Å–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- **AI keyword** AND (**legal keyword** OR **business keyword**)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå "–î–¢–ü –≤ –ú–æ—Å–∫–≤–µ" - –æ—Ç—Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è (–Ω–µ—Ç AI)
- ‚ùå "OpenAI –≤—ã–ø—É—Å—Ç–∏–ª GPT-5" - –æ—Ç—Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è (–Ω–µ—Ç legal/business)
- ‚úÖ "OpenAI —Å—É–¥–∏—Ç—Å—è —Å Microsoft –∏–∑-–∑–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞" - –ø—Ä–æ–π–¥–µ—Ç (AI + legal)
- ‚úÖ "–ö–æ–º–ø–∞–Ω–∏–∏ –≤–Ω–µ–¥—Ä—è—é—Ç ChatGPT –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏" - –ø—Ä–æ–π–¥–µ—Ç (AI + business)

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–°–±–æ—Ä:**
- ~5-15 —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç TELEGRAM_FETCH_LIMIT)
- ~50-100 —Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–≥–æ (–µ—Å–ª–∏ 10 –∫–∞–Ω–∞–ª–æ–≤)
- ~10-20 –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ AI+legal

**–ö–∞—á–µ—Å—Ç–≤–æ:**
- –ë–æ–ª–µ–µ —Å–≤–µ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ (real-time –∏–∑ Telegram)
- –õ—É—á—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–≥–æ —Ä—ã–Ω–∫–∞
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –ø–æ AI/LegalTech

---

## üö® Troubleshooting

### –û—à–∏–±–∫–∞: "Telegram session not authorized"

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–®–∞–≥ 3).

### –û—à–∏–±–∫–∞: "ChannelPrivateError"

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–∞–Ω–∞–ª –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∏–ª–∏ –±—ã–ª —É–¥–∞–ª–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç–µ —ç—Ç–æ—Ç –∫–∞–Ω–∞–ª –∏–∑ `TELEGRAM_CHANNELS`.

### –û—à–∏–±–∫–∞: "FloodWaitError"

**–ü—Ä–∏—á–∏–Ω–∞:** Telegram rate limit –ø—Ä–µ–≤—ã—à–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–æ–∂–¥–µ—Ç. –£–º–µ–Ω—å—à–∏—Ç–µ `TELEGRAM_FETCH_LIMIT`.

### –ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ Telegram

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. `TELEGRAM_FETCH_ENABLED=true` –≤ `.env`
2. `TELEGRAM_API_ID` –∏ `TELEGRAM_API_HASH` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –§–∞–π–ª `telegram_bot.session` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
4. –ö–∞–Ω–∞–ª—ã –≤ `TELEGRAM_CHANNELS` –ø—É–±–ª–∏—á–Ω—ã–µ –∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç

**–õ–æ–≥–∏:**
```bash
docker compose logs celery_worker | grep telegram
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **–ß—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ:**
- –ß—Ç–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
- Session —Ñ–∞–π–ª –≤ `.gitignore`
- API credentials –≤ `.env` (–Ω–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è)

‚ùå **–ù–ï –¥–µ–ª–∞–π—Ç–µ:**
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.session` —Ñ–∞–π–ª—ã
- –ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ API credentials
- –ù–µ —á–∏—Ç–∞–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —á–∞—Ç—ã –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ Telegram –±–æ—Ç–µ:

```
/fetch - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä –≤—Ä—É—á–Ω—É—é
/stats - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/analytics - –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
```

### –ú–µ—Ç—Ä–∏–∫–∏:

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–±–æ—Ä–∞ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç:
```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–±–æ—Ä–∞ –Ω–æ–≤–æ—Å—Ç–µ–π

üì∞ –í—Å–µ–≥–æ —Å–æ–±—Ä–∞–Ω–æ: 45 —Å—Ç–∞—Ç–µ–π
üì° –ò—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 12

üìã –ü–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º:
  ‚úÖ Google News RU: 8 —à—Ç.
  ‚úÖ Telegram Channels: 12 —à—Ç.
  ‚úÖ Perplexity Search RU: 5 —à—Ç.
  ...

üèÜ –¢–æ–ø-3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞:
  1. Telegram Channels (12)
  2. Google News RU (8)
  3. Perplexity Search RU (5)
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ Telegram –∫–∞–Ω–∞–ª–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 09:00 MSK.

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ `/fetch`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π
3. –î–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª—ã –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `TELEGRAM_FETCH_LIMIT` –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
